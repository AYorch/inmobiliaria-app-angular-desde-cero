<form [formGroup]="_form" (ngSubmit)="save()">

    <mat-card>
        <mat-card-header>
            <h1>{{title}}</h1>
        </mat-card-header>


        <mat-card-content>

            <mat-form-field>
                <mat-label>Id</mat-label>
                <input type="text" matInput formControlName="id">
            </mat-form-field>

            <mat-form-field class="content-form-field">
                <mat-label>Dirección</mat-label>
                <textarea matInput formControlName="direccion" (keydown.enter)="preventEnter($event)"
                    (focus)="_form.get('direccion')?.markAsTouched()"></textarea>
                @if (_form.get('direccion')?.hasError('required') && _form.get('direccion')?.touched) {
                <mat-error>La Dirección es <strong>obligatoria</strong></mat-error>
                }
                @if (_form.get('direccion')?.hasError('minlength') && _form.get('direccion')?.touched) {
                <mat-error>
                    Debe tener al menos
                    <strong>{{ _form.get('direccion')?.errors?.['minlength']?.requiredLength }}</strong>
                    caracteres (Actual:
                    <strong>{{ _form.get('direccion')?.errors?.['minlength']?.actualLength }}</strong>)
                </mat-error>
                }

                @if (_form.get('direccion')?.hasError('maxlength') && _form.get('direccion')?.touched) {
                <mat-error>
                    No puede superar los
                    <strong>{{ _form.get('direccion')?.errors?.['maxlength']?.requiredLength }}</strong>
                    caracteres (Actual:
                    <strong>{{ _form.get('direccion')?.errors?.['maxlength']?.actualLength }}</strong>)
                </mat-error>
                }
            </mat-form-field>

            <mat-form-field class="content-form-field">
                <mat-label>---Seleccionar tipo de propiedad---</mat-label>
                <mat-select formControlName="tipo" (focus)="_form.get('tipo')?.markAsTouched()">
                    <mat-option value="Mini-Departamento">Mini-Departamento</mat-option>
                    <mat-option value="Departamento">Departamento</mat-option>
                    <mat-option value="Casa">Casa</mat-option>
                </mat-select>
                @if (_form.get('tipo')?.hasError('required') && _form.get('tipo')?.touched) {
                <mat-error>El Tipo de Propiedad es <strong>obligatorio</strong></mat-error>
                }
            </mat-form-field>


            <mat-form-field class="content-form-field">
                <mat-label>Área (m2)</mat-label>
                <input matInput type="number" formControlName="area" (focus)="_form.get('area')?.markAsTouched()"
                    step="0.01" min="20">

                @if (_form.get('area')?.hasError('required') && _form.get('area')?.touched) {
                <mat-error>El Área es <strong>obligatorio</strong></mat-error>
                }
                @if (_form.get('area')?.hasError('min') && (_form.get('area')?.touched || _form.get('area')?.dirty)) {
                <mat-error>El Área debe ser <strong>mayor o igual a 20 m2</strong></mat-error>
                }
                @if (_form.get('area')?.hasError('pattern') && _form.get('area')?.touched) {
                <mat-error>El Área debe ser un número válido con hasta <strong>2 decimales</strong></mat-error>
                }
            </mat-form-field>


            <mat-form-field class="content-form-field" floatLabel="always">
                <mat-label>Precio</mat-label>
                <input matInput type="number" formControlName="precio" (focus)="_form.get('precio')?.markAsTouched()" />
                <span matTextPrefix>S/.&nbsp;</span>

                @if (_form.get('precio')?.hasError('required') && _form.get('precio')?.touched) {
                <mat-error>El Precio es <strong>obligatorio</strong></mat-error>
                }
                @if (_form.get('precio')?.hasError('min') && _form.get('precio')?.touched) {
                <mat-error>El Precio debe ser <strong>mayor o igual a 20</strong></mat-error>
                }
                @if (_form.get('precio')?.hasError('pattern') && _form.get('precio')?.touched) {
                <mat-error>El Precio debe ser un número válido con hasta <strong>2 decimales</strong></mat-error>
                }
            </mat-form-field>



            <mat-radio-group aria-label="Seleccione una opción" formControlName="estado" class="content-form-field"
                (change)="_form.get('estado')?.markAsTouched()">
                <mat-radio-button value="En Venta">En Venta</mat-radio-button>
                <mat-radio-button value="En Alquiler">En Alquiler</mat-radio-button>
            </mat-radio-group>

            @if (_form.get('estado')?.hasError('required') && _form.get('estado')?.touched) {
            <mat-error>El estado es <strong>obligatorio</strong></mat-error>
            }

        </mat-card-content>


        <mat-card-actions>
            <button matButton="outlined" type="submit">Grabar</button>
            <button matButton="tonal" (click)="close()" type="button">Cancelar</button>
        </mat-card-actions>
    </mat-card>
</form>